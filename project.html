<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title></title>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
</head>

<body>
    <div id="dragTableArea"></div>

    <button id="modalOpen"> + </button>
        <div id="loginModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                <h1>ユーザー追加</h1>
                <span class="modalClose">×</span>
                </div>
                <div class="modalBody">
                    <button id="login" onclick="window.location='login.html'">ログインしてMyページを利用</button>
                    <button id="unknown" onclick="modalNameOpen()">ログインせずに利用</button>
                </div>
                <div class="modalName">
                    <input id='unknown-name' type='text' placeholder='名前'>
                    <button id='name-decision' onclick="modalNameClose()">決定</button>
                </div>
            </div>
        </div>

        <!-- コピー対象要素とコピーボタン -->
        <input id="copyUrl" type="url" readonly>
        <button onclick="copyToClipboard()">URLをコピー</button>


        <script>
            //modalを表示・非表示する
            var buttonOpen = document.getElementById('modalOpen');
            var modal = document.getElementById('loginModal');
            var buttonClose = document.getElementsByClassName('modalClose')[0];
            var bodyModal=document.getElementsByClassName('modalBody')[0];
            var nameModal=document.getElementsByClassName('modalName')[0];

            buttonOpen.addEventListener('click', modalOpen);
            function  modalOpen(){
                modal.style.display='block';
            };
            buttonClose.addEventListener('click', modalClose);
            function modalClose(){
                modal.style.display='none';
            }
            function modalNameOpen(){
                bodyModal.style.display='none';
                nameModal.style.display='block';
            }
            function modalNameClose(){
                modal.style.display='none';
                let userName=document.getElementById('unknown-name').value;
            }
            //URLをコピーする
            copyUrl.value=location.href;
            function copyToClipboard() {
                // コピー対象をJavaScript上で変数として定義する
                var copyTarget = document.getElementById("copyUrl");
                // コピー対象のテキストを選択する
                copyTarget.select();
                // 選択しているテキストをクリップボードにコピーする
                document.execCommand("Copy");
                // コピーをお知らせする
                alert("コピーできました！ : " + copyTarget.value);
            }
        </script>

        <style>
            .modal, .modalName{
                display: none;
                position: fixed;
                z-index: 1;
                left: 0;
                top: 0;
                height: 100%;
                width: 100%;
                overflow: auto;
                background-color: rgba(0,0,0,0.5);
            }
        </style>

</body>
<script>

    var tableTag = $("<table id=\"dragTable\" cellpadding=\"0\" cellspacing=\"0\">");
    for (var i = 0; i < getProjectPeriod(); i++) {
        var tableRow = $("<tr></tr>").appendTo(tableTag);
        for (var j = 0; j < getProjectMembers(); j++) {
            $("<td></td>").appendTo(tableRow);
        }
    }
    $("#dragTableArea").append(tableTag);
    function getProjectPeriod() {
        return 20;
    }
    function getProjectMembers() {
        return 3;
    }

    var isMouseDown = false;
    $("#dragTableArea td")
        .mousedown(function () {
            isMouseDown = true;
            $(this).toggleClass("highlighted");
            return false; // prevent text selection
        })
        .mouseover(function () {
            if (isMouseDown) {
                $(this).toggleClass("highlighted");
            }
        });

    $(document)
        .mouseup(function () {
            isMouseDown = false;
        });

</script>
<style>
    table td {
        width: 100px;
        height: 100px;
        text-align: center;
        vertical-align: middle;
        background-color: #ccc;
        border: 1px solid #fff;
    }

    table td.highlighted {
        background-color: #999;
    }
</style>

</html>