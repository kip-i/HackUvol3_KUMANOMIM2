<!doctype html>
<html>
  <head>
    <meta charset="utf-8" /><!-- update the version number as needed -->
   
  <!--  -->
  <script src="/__/firebase/6.2.0/firebase-app.js"></script>
  <script src="/__/firebase/6.2.0/firebase-firestore.js"></script>
  <script src="/__/firebase/6.2.0/firebase-auth.js"></script>
  <script src="/__/firebase/init.js"></script>

    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"> 
    <title>ホームページ</title>
    <link rel="stylesheet" href="login.css" />
    <style>
      .header-title {
        padding: 10px;
        margin-bottom: 100px;
        font-size: 18px;
        border-bottom: 1px solid #aaa;
      }
      .hide {
        display: none;
      }
      #info {
        text-align: center;
        font-size: 4em;
        font-weight: bold;
      }
    </style>
  </head>
  <body>
    <h1 class="header-title">ホームページ</h1>
    
    <div class="container">
      <div id="input-area">
        <button id="mypage" onclick="mypageClick()">Myページ へ</button><br><br>
        <input id="project-name" type="text" placeholder="プロジェクト名">
        <p>プロジェクト開始: <input id="project-start" type="date"></p>
        <p>プロジェクト終了: <input id="project-finish" type="date"></p>
        <button id="project-make" onclick="forProject()">プロジェクトを作成</button>

      </div>
    </div>
    
    <!-- テキスト表示用 -->
    <p id="info"></p>
    
    <script src="https://www.gstatic.com/firebasejs/3.4.1/firebase.js"></script>
    <script src="config.js"></script>
    <script>
      let db=firebase.firestore();
      let userid="";
      //認証状態の確認
      function mypageClick(){   
        firebase.auth().onAuthStateChanged(function(user) {
          if(user) {
            userid = firebase.auth().currentUser.uid;
            loginDisplay();
          }
          else {
            window.location="login.html";
          }
          });
        }
        function loginDisplay() {
        //  logout.classList.remove('hide');
          inputarea.classList.add('hide');
          let userName=getUserName();
          info.textContent = "ログイン中です!";
          window.location="mypage.html";
        }
        function getUserName(){
          var userName=db.collection("account").doc(userid).get().data()["name"];
          return userName;
        }

        function forProject(){
          var projectName = document.getElementById("project-name");
          var projectStartPeriod=document.getElementById("project-start");
          var projectFinishPeriod=document.getElementById("project-finish");

          createProject(projectName,projectStartPeriod,projectFinishPeriod);
        }
    </script>
    
  </body>
</html>